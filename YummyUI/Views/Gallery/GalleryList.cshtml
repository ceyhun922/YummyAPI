
@{
    Layout = "_AdminLayout";
}

@section Styles{
<style>
  .ai-page, .ai-page *{ box-sizing:border-box; }

  .ai-page{
    min-height:100%;
    padding: 2.2rem 2.6rem;
    position:relative;
    overflow:hidden;
    background:
      radial-gradient(1200px 600px at 70% 80%, rgba(56,189,248,.22), transparent 60%),
      radial-gradient(900px 500px at 15% 20%, rgba(139,92,246,.26), transparent 60%),
      radial-gradient(800px 420px at 90% 10%, rgba(99,102,241,.20), transparent 55%),
      linear-gradient(135deg,#070b1f 0%,#0a1030 40%,#050818 100%);
  }

  .orb{ position:absolute; border-radius:999px; filter:blur(90px); opacity:.55; pointer-events:none; }
  .orb.a{ width:480px;height:480px;left:-180px;top:-160px;background:rgba(139,92,246,.40); }
  .orb.b{ width:420px;height:420px;right:-200px;top:140px;background:rgba(56,189,248,.36); }
  .orb.c{ width:520px;height:520px;left:30%;bottom:-260px;background:rgba(99,102,241,.30); }

  .wrap{
    width:100%;
    max-width: 1300px;
    margin:0 auto;
    padding: 0 22px;
    position:relative;
    z-index:5;
    display:flex;
    flex-direction:column;
    gap: 1.2rem;
  }

  .page-head{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:1rem;
  }

  .head-left{
    display:flex;
    align-items:center;
    gap:.9rem;
  }

  .badge{
    width:52px;height:52px;
    border-radius:16px;
    display:grid;place-items:center;
    background:linear-gradient(135deg,#667eea,#764ba2);
    box-shadow:0 12px 35px rgba(102,126,234,.6);
    border:1px solid rgba(255,255,255,.12);
  }

  .title{
    margin:0;
    font-size:2rem;
    font-weight:950;
    background:linear-gradient(135deg,#fff,#a8b9ff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }

  .sub{
    margin:.2rem 0 0 0;
    color: rgba(255,255,255,.65);
    font-weight:700;
    font-size:.95rem;
  }

  .btn{
    display:inline-flex;
    align-items:center;
    gap:.55rem;
    padding: 1rem 1.15rem;
    border-radius: 16px;
    font-weight: 950;
    text-decoration:none;
    border: 1px solid rgba(255,255,255,.14);
    transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    white-space: nowrap;
    cursor:pointer;
  }
  .btn:hover{ transform: translateY(-2px); box-shadow: 0 18px 55px rgba(0,0,0,.35); }
  .btn:active{ transform: translateY(0); opacity:.96; }

  .btn-primary{
    color:#fff;
    background: linear-gradient(135deg,#667eea,#764ba2);
    box-shadow: 0 14px 40px rgba(102,126,234,.6);
  }

  .panel{
    background: rgba(15,23,42,.55);
    border-radius: 28px;
    border: 1px solid rgba(255,255,255,.12);
    backdrop-filter: blur(16px);
    box-shadow: 0 40px 80px rgba(0,0,0,.45);
    overflow:hidden;
  }

  .panel-head{
    padding: 1.1rem 1.35rem;
    border-bottom: 1px solid rgba(255,255,255,.08);
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap: 1rem;
  }
  .pill{
    padding:.45rem .75rem;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.85);
    font-weight: 900;
    font-size: .82rem;
  }

  .content{ padding: 1.35rem; }

  .grid{
    display:grid;
    grid-template-columns: repeat(12, minmax(0, 1fr));
    gap: 1rem;
  }

  .cardx{
    grid-column: span 4;
    border-radius: 22px;
    border: 1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.04);
    overflow:hidden;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease, background .25s ease;
    position:relative;
  }

  .cardx:hover{
    transform: translateY(-8px);
    background: rgba(255,255,255,.07);
    border-color: rgba(102,126,234,.45);
    box-shadow: 0 30px 70px rgba(0,0,0,.55);
  }

  .imgwrap{
    height: 220px;
    background: rgba(0,0,0,.25);
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    position:relative; /* ‚úÖ hover g√∂z i√ßin */
  }

  .imgwrap img{
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    transform: scale(1.02);
    transition: transform .35s ease;
    filter: saturate(1.05) contrast(1.02);
  }

  .cardx:hover .imgwrap img{ transform: scale(1.10); }

  .body{
    padding: 1rem 1.1rem 1.15rem;
    display:flex;
    flex-direction:column;
    gap:.8rem;
  }

  .row1{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:.8rem;
  }

  .name{
    margin:0;
    color:#fff;
    font-weight: 950;
    font-size: 1.02rem;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }

  .id{
    padding:.35rem .6rem;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.78);
    font-weight: 900;
    font-size: .78rem;
    white-space:nowrap;
  }

  .actions{
    display:flex;
    gap:.55rem;
    flex-wrap:wrap;
  }

  .btn-mini{
    padding: .72rem .95rem;
    border-radius: 14px;
    font-weight: 950;
    font-size: .86rem;
    border: 1px solid rgba(255,255,255,.14);
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    gap:.45rem;
    transition:.15s;
    cursor:pointer;
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.92);
  }
  .btn-mini:hover{ transform: translateY(-2px); }

  .btn-mini.warn{ background: linear-gradient(135deg,#fbbf24,#f59e0b); color:#1a1a1a; border-color: transparent; }
  .btn-mini.dang{ background: linear-gradient(135deg,#ef4444,#dc2626); color:#fff; border-color: transparent; }

  /* ‚úÖ G√ñZ: sadece hover'da ortaya √ßƒ±ksƒ±n */
  .eye-overlay{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(0,0,0,.35);
    opacity:0;
    transition: opacity .22s ease;
    cursor:pointer;
    user-select:none;
  }
  .eye-overlay span{
    font-size: 2.2rem;
    color:#fff;
    line-height:1;
  }
  .imgwrap:hover .eye-overlay{ opacity:1; }

  @@mediadia(max-width: 1100px){ .cardx{ grid-column: span 6; } }
  @@mediadia(max-width: 700px){
    .ai-page{ padding: 1.4rem; }
    .wrap{ padding: 0 12px; }
    .title{ font-size: 1.6rem; }
    .cardx{ grid-column: span 12; }
  }
</style>
}
<div class="ai-page">
  <div class="orb a"></div>
  <div class="orb b"></div>
  <div class="orb c"></div>

  <div class="wrap">

    <div class="page-head">
      <div class="head-left">
        <div class="badge">üñºÔ∏è</div>
        <div>
          <h1 class="title">Galeri</h1>
          <p class="sub">Sadece ekle / d√ºzenle / sil</p>
        </div>
      </div>

      <a asp-action="CreateGallery" asp-controller="Gallery" class="btn btn-primary">
        ‚ûï Yeni G√∂rsel Ekle
      </a>
    </div>

    <div class="panel">
      <div class="panel-head">
        <div style="color: rgba(255,255,255,.75); font-weight:850;">Galeri √∂ƒüeleri</div>
        <span class="pill">Toplam: 3</span>
      </div>

      <div class="content">
        <div class="grid">

          <!-- CARD 1 -->
          <div class="cardx">
            <div class="imgwrap">
              <img src="~/Yummy/assets/img/gallery/gallery-1.jpg" alt="Gallery 1" />
              <div class="eye-overlay" onclick="openPreviewWithArrows(0)">
                <span>üëÅÔ∏è</span>
              </div>
            </div>

            <div class="body">
              <div class="row1">
                <p class="name">Gallery 1</p>
                <span class="id">#1</span>
              </div>

              <div class="actions">
                <a asp-action="UpdateGallery" asp-controller="Gallery" asp-route-id="1" class="btn-mini warn">‚úèÔ∏è D√ºzenle</a>
                <a href="javascript:void(0)" class="btn-mini dang"
                   onclick="confirmDelete('@Url.Action("DeleteGallery","Gallery", new { id = 1 })')">üóëÔ∏è Sil</a>
              </div>
            </div>
          </div>

          <!-- CARD 2 -->
          <div class="cardx">
            <div class="imgwrap">
              <img src="~/Yummy/assets/img/gallery/gallery-2.jpg" alt="Gallery 2" />
              <div class="eye-overlay" onclick="openPreviewWithArrows(1)">
                <span>üëÅÔ∏è</span>
              </div>
            </div>

            <div class="body">
              <div class="row1">
                <p class="name">Gallery 2</p>
                <span class="id">#2</span>
              </div>

              <div class="actions">
                <a asp-action="UpdateGallery" asp-controller="Gallery" asp-route-id="2" class="btn-mini warn">‚úèÔ∏è D√ºzenle</a>
                <a href="javascript:void(0)" class="btn-mini dang"
                   onclick="confirmDelete('@Url.Action("DeleteGallery","Gallery", new { id = 2 })')">üóëÔ∏è Sil</a>
              </div>
            </div>
          </div>

          <!-- CARD 3 -->
          <div class="cardx">
            <div class="imgwrap">
              <img src="~/Yummy/assets/img/gallery/gallery-3.jpg" alt="Gallery 3" />
              <div class="eye-overlay" onclick="openPreviewWithArrows(2)">
                <span>üëÅÔ∏è</span>
              </div>
            </div>

            <div class="body">
              <div class="row1">
                <p class="name">Gallery 3</p>
                <span class="id">#3</span>
              </div>

              <div class="actions">
                <a asp-action="UpdateGallery" asp-controller="Gallery" asp-route-id="3" class="btn-mini warn">‚úèÔ∏è D√ºzenle</a>
                <a href="javascript:void(0)" class="btn-mini dang"
                   onclick="confirmDelete('@Url.Action("DeleteGallery","Gallery", new { id = 3 })')">üóëÔ∏è Sil</a>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
@section Scripts{
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // SweetAlert2 yoksa fallback confirm
  function confirmDelete(url) {
    if (typeof Swal === "undefined") {
      if (confirm("Emin misin? Bu g√∂rsel kalƒ±cƒ± olarak silinecek!")) window.location.href = url;
      return;
    }
    Swal.fire({
      title: 'Emin misin?',
      text: 'Bu g√∂rsel kalƒ±cƒ± olarak silinecek!',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#ef4444',
      cancelButtonColor: '#6b7280',
      confirmButtonText: 'Evet, sil',
      cancelButtonText: 'Vazge√ß'
    }).then((result) => {
      if (result.isConfirmed) window.location.href = url;
    });
  }

  // ‚úÖ SADECE SAƒû/SOL OK
  const images = [
    '@Url.Content("~/Yummy/assets/img/gallery/gallery-1.jpg")',
    '@Url.Content("~/Yummy/assets/img/gallery/gallery-2.jpg")',
    '@Url.Content("~/Yummy/assets/img/gallery/gallery-3.jpg")'
  ];
  let currentIndex = 0;

  function openPreviewWithArrows(index){
    currentIndex = index;
    renderPreview();
  }

  function renderPreview(){
    if (typeof Swal === "undefined") {
      window.open(images[currentIndex], "_blank");
      return;
    }

    Swal.fire({
      html: `
        <div style="position:relative;display:flex;align-items:center;justify-content:center;">
          <img src="${images[currentIndex]}"
               style="max-width:90vw;max-height:80vh;border-radius:12px;display:block;" />

          <button type="button" onclick="prevImg(event)"
            style="position:absolute;left:14px;top:50%;transform:translateY(-50%);
            background:transparent;border:none;font-size:70px;color:white;cursor:pointer;user-select:none;">‚Äπ</button>

          <button type="button" onclick="nextImg(event)"
            style="position:absolute;right:14px;top:50%;transform:translateY(-50%);
            background:transparent;border:none;font-size:70px;color:white;cursor:pointer;user-select:none;">‚Ä∫</button>
        </div>
      `,
      background:'#0f172a',
      showConfirmButton:false,
      showCloseButton:false,   
      allowOutsideClick:true,
      allowEscapeKey:true,
      padding:'0.9rem'
    });
  }

  function nextImg(e){
    if(e) e.stopPropagation();
    currentIndex = (currentIndex + 1) % images.length;
    renderPreview();
  }
  function prevImg(e){
    if(e) e.stopPropagation();
    currentIndex = (currentIndex - 1 + images.length) % images.length;
    renderPreview();
  }
</script>
}