@using YummyUI.DTOs.ServiceDTOs
@model List<ResultServiceDto>

@{
  Layout = "_AdminLayout";
}

<style>
  .sv-page, .sv-page * { box-sizing:border-box; }
  .sv-page{
    min-height:100%;
    padding: 1.6rem 2rem;
    position:relative;
    overflow:hidden;
    background:
      radial-gradient(1200px 600px at 70% 80%, rgba(56,189,248,.18), transparent 60%),
      radial-gradient(900px 500px at 15% 20%, rgba(139,92,246,.22), transparent 60%),
      radial-gradient(800px 420px at 90% 10%, rgba(99,102,241,.18), transparent 55%),
      linear-gradient(135deg,#070b1f 0%,#0a1030 40%,#050818 100%);
    border-radius: 22px;
  }

  .sv-wrap{ max-width: 1400px; margin:0 auto; position:relative; z-index:2; display:flex; flex-direction:column; gap:1.2rem; }
  .sv-header{ display:flex; align-items:center; justify-content:space-between; gap:1rem; }

  .sv-title{ display:flex; align-items:center; gap:.9rem; margin:0; }
  .sv-badge{
    width:56px;height:56px;border-radius:18px; display:grid; place-items:center;
    background: linear-gradient(135deg,#667eea,#764ba2);
    border:1px solid rgba(255,255,255,.14);
    box-shadow: 0 18px 55px rgba(102,126,234,.45);
  }
  .sv-badge i{ font-size:26px; color:#fff; }
  .sv-title h1{
    margin:0; font-size:2rem; font-weight:950;
    background: linear-gradient(135deg,#fff,#a8b9ff);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  }

  .sv-add{
    display:inline-flex; align-items:center; gap:.6rem;
    padding: 1rem 1.25rem; border-radius: 16px;
    font-weight: 950; color:#fff; text-decoration:none;
    background: linear-gradient(135deg,#667eea,#764ba2);
    border:1px solid rgba(255,255,255,.14);
    box-shadow: 0 16px 45px rgba(102,126,234,.55);
    transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    white-space:nowrap;
  }
  .sv-add:hover{ transform: translateY(-2px); box-shadow: 0 22px 65px rgba(102,126,234,.72); }

  .sv-panel{
    border-radius: 28px;
    background: rgba(15,23,42,.55);
    border: 1px solid rgba(255,255,255,.12);
    backdrop-filter: blur(16px);
    box-shadow: 0 40px 80px rgba(0,0,0,.45);
    overflow:hidden;
  }
  .sv-panel-head{
    padding: 1.1rem 1.25rem;
    display:flex; align-items:center; justify-content:space-between;
    border-bottom:1px solid rgba(255,255,255,.08);
  }
  .sv-sub{ margin:0; color: rgba(255,255,255,.70); font-weight:850; }
  .sv-count{
    padding:.45rem .8rem; border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.85); font-weight:900; font-size:.85rem;
  }

  .sv-list{ padding: 1rem; display:flex; flex-direction:column; gap: .9rem; }

  .sv-card{
    display:flex; align-items:center; gap:1rem;
    padding: 1rem 1.1rem;
    border-radius: 22px;
    background: rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 20px 55px rgba(0,0,0,.30), inset 0 1px 0 rgba(255,255,255,.06);
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
  }
  .sv-card:hover{ transform: translateY(-2px); background: rgba(255,255,255,.07); border-color: rgba(102,126,234,.30); }

  .sv-icon{
    width:64px;height:64px;border-radius: 20px;
    display:grid; place-items:center;
    background: linear-gradient(135deg, rgba(102,126,234,.9), rgba(118,75,162,.85));
    border:1px solid rgba(255,255,255,.15);
    box-shadow: 0 18px 45px rgba(0,0,0,.35);
    flex: 0 0 auto;
  }
  .sv-icon i{ font-size:30px; color:#fff; line-height:1; }

  .sv-main{ flex:1; min-width:0; }
  .sv-name{ margin:0; color:#fff; font-weight:950; font-size:1.1rem; }
  .sv-desc{
    margin:.35rem 0 0 0;
    color: rgba(255,255,255,.72);
    line-height:1.55;
    display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
  }

  .sv-right{ display:flex; align-items:center; gap:.65rem; flex:0 0 auto; }
  .sv-pill{
    padding:.55rem .9rem; border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.85);
    font-weight:900; font-size:.85rem;
    white-space:nowrap;
  }
  .sv-status{
    display:inline-flex; align-items:center; gap:.45rem;
    padding:.55rem .9rem; border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.88);
    font-weight:950; font-size:.85rem;
    white-space:nowrap;
  }
  .sv-dot{ width:10px;height:10px;border-radius:999px; background:#f59e0b; box-shadow:0 0 18px rgba(245,158,11,.55); }
  .sv-status.active .sv-dot{ background:#22c55e; box-shadow:0 0 18px rgba(34,197,94,.55); }

  .sv-actions{ display:flex; gap:.55rem; }
  .sv-btn{
    border:none;
    padding:.75rem 1.05rem;
    border-radius: 14px;
    font-weight: 950;
    font-size:.9rem;
    text-decoration:none;
    display:inline-flex; align-items:center; gap:.5rem;
    white-space:nowrap;
    transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
  }
  .sv-btn:hover{ transform: translateY(-2px); box-shadow:0 16px 45px rgba(0,0,0,.35); }
  .sv-del{ background: linear-gradient(135deg,#ef4444,#dc2626); color:#fff; }
  .sv-edit{ background: linear-gradient(135deg,#fbbf24,#f59e0b); color:#1a1a1a; }

  @@media (max-width: 980px){
    .sv-page{ padding: 1.1rem; }
    .sv-title h1{ font-size: 1.6rem; }
    .sv-card{ flex-direction:column; align-items:flex-start; }
    .sv-right{ width:100%; justify-content:space-between; flex-wrap:wrap; }
    .sv-actions{ width:100%; justify-content:flex-end; }
  }
</style>

<div class="sv-page">
  <div class="sv-wrap">
    <div class="sv-header">
      <div class="sv-title">
        <div class="sv-badge"><i class="bi bi-tools"></i></div>
        <h1>Servisler</h1>
      </div>

      <a asp-action="CreateService" asp-controller="Service" class="sv-add">
        <i class="bi bi-plus-lg"></i> Yeni Servis
      </a>
    </div>

    <div class="sv-panel">
      <div class="sv-panel-head">
        <p class="sv-sub">Servis yönetimi</p>
        <span class="sv-count">Toplam: @(Model?.Count ?? 0)</span>
      </div>

      <div class="sv-list">
        @if (Model != null && Model.Any())
        {
          foreach (var service in Model)
          {
            var iconName = string.IsNullOrWhiteSpace(service.ServiceIcon) ? "stars" : service.ServiceIcon.Trim();

            <div class="sv-card">
              <div class="sv-icon">
                <i class="bi bi-@iconName"></i>
              </div>

              <div class="sv-main">
                <p class="sv-name">@service.ServiceTitle</p>
                <p class="sv-desc">@service.ServiceDescription</p>
              </div>

              <div class="sv-right">
                <span class="sv-pill">#@service.ServiceId</span>

                <span class="sv-status @(service.ServiceStatus ? "active" : "")">
                  <span class="sv-dot"></span>
                  @(service.ServiceStatus ? "Aktif" : "Pasif")
                </span>

                <div class="sv-actions">
                  <a asp-action="ServiceDelete"
                     asp-controller="Service"
                     asp-route-id="@service.ServiceId"
                     class="sv-btn sv-del js-delete">
                    <i class="bi bi-trash3"></i> Sil
                  </a>

                  <a asp-action="ServiceUpdate"
                     asp-controller="Service"
                     asp-route-id="@service.ServiceId"
                     class="sv-btn sv-edit">
                    <i class="bi bi-pencil-square"></i> Güncelle
                  </a>
                </div>
              </div>
            </div>
          }
        }
        else
        {
          <div style="padding: 1.25rem; color: rgba(255,255,255,.75); font-weight:800;">
            Henüz servis eklenmemiş.
          </div>
        }
      </div>
    </div>
  </div>
</div>

@section Scripts{
<script>
  document.addEventListener("click", function(e){
    const btn = e.target.closest(".js-delete");
    if(!btn) return;

    e.preventDefault();
    const url = btn.getAttribute("href");

    Swal.fire({
      title: "Emin misin?",
      text: "Bu servis silinecek. Geri alınamaz!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonText: "Evet, sil",
      cancelButtonText: "Vazgeç",
      confirmButtonColor: "#dc2626",
    }).then((result) => {
      if(result.isConfirmed){
        window.location.href = url;
      }
    });
  });
</script>
}
